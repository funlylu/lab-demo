<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Highcharts Example</title>

		<script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.2/jquery.min.js"></script><!--jQuery文件-->
		<script src="../../js/highcharts.js"></script>
        <script src="../../js/modules/exporting.js"></script>
		<script type="text/javascript">
$(function () {
         
        options={
            //图表选项
            chart: {
                type: 'column'
            },
            //标题
            title: {
                text: 'Total fruit consumtion, grouped by gender'
            },
            //坐标轴
            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },
    
            yAxis: {
                allowDecimals: false,
                min: 0,
                title: {
                    text: 'Number of fruits'
                }
            },
             //数据提示框选项
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },
            //============================================================= 
            plotOptions: {
                column: {
                    stacking: 'normal' //percent百分比堆叠
                }
            },
    
            series: [{
                name: 'John',
                data: [5, 3, 4, 7, 2],
                stack: 'male' //该属性用于分组
            }, {
                name: 'Joe',
                data: [3, 4, 4, 2, 5],
                stack: 'male'
            }, {
                name: 'Jane',
                data: [2, 5, 6, 2, 1],
                stack: 'female'
            }, {
                name: 'Janet',
                data: [3, 0, 4, 4, 3],
                stack: 'female'
            }]
        };
		//=================================================================
		
        $('#container').highcharts(options);//创建初始化图表
    });
    
		function stackmode()
		{
		   //alert("asdasd");
		  if(options.plotOptions.column.stacking=="normal")
		    options.plotOptions.column.stacking='percent';
			else 
			options.plotOptions.column.stacking='normal';
			
			$('#container').highcharts().destroy();
			$('#container').highcharts(options);
		};

		</script>
	</head>
	


    <body style="background-color:#DCDCDC;">
	    <div align="center" style="margin-top:5%;"><h3>柱状图-分组堆叠</h3></div>
	    <div style="float:center;margin-left:60%;">
		<button id="column" onclick="stackmode()">百分比堆叠</button>
		<button id="bar" onclick="stackmode()">正常堆叠</button>
		</div>
		<div id="chart" style="float:center;margin-right:5%;margin-top:1%">
		<div id="container" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>
		</div>
	</body>
</html>
